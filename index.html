<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">
  <link href="../perfect-scrollbar/src/perfect-scrollbar.css" rel="stylesheet">

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="../perfect-scrollbar/src/perfect-scrollbar.js"></script>
  <script src="../perfect-scrollbar/src/jquery.mousewheel.js"></script>


  <script src="widget-it.js"></script>
  <style>
    #description {
      border: 1px solid gray;
      height: 150px;
      width: 400px;
      overflow: hidden;
      position: absolute;
    }
  </style>

  <script>
    jQuery(document).ready(function ($) {
      "use strict";

      var widgetDefinitions = [
        {
          selector: ".w3schools",
          site: "http://www.w3schools.com/html/html_css.asp",
          leftOffset: 150,
          topOffset: 320,
          width: 505,
          height: 405
        },
        {
          selector: ".github",
          site: "http://noraesae.github.io/perfect-scrollbar/",
          leftOffset: 10,
          topOffset: 730,
          width: 610,
          height: 405
        }];


      $.widgetIt(widgetDefinitions);

      /*
      $('#description').perfectScrollbar({
        wheelSpeed: 20,
        wheelPropagation: false
      });
*/

      $('.w3schools').perfectScrollbar({
        wheelSpeed: 20,
        wheelPropagation: false,
        scrollTopFunctionFactory: function (targetContainer) {
          var marginTopStart = parseInt($("iframe").css("margin-top"), 10),
            heightStart = parseInt($("iframe").css("height"), 10);

          return function (y) {
            if (isNaN(y)) {
              return marginTopStart - parseInt($("iframe").css("margin-top"), 10);
            } else {
              if (y < 0) {
                y = 0;
              } else if (y > 1200 + marginTopStart - 100) {
                // FIXME: it does not stop in the right place: where does the 100 come from?
                y = 1200 + marginTopStart - 100;
              }
              $("iframe").css("margin-top", marginTopStart - y);
              $("iframe").css("height", heightStart + y);
            }
          };
        },
        scrollLeftFunctionFactory: function (targetContainer) {
          var marginLeftStart = parseInt($("iframe").css("margin-left"), 10),
            widthStart = parseInt($("iframe").css("width"), 10);

          return function (x) {
            if (isNaN(x)) {
              return marginLeftStart - parseInt($("iframe").css("margin-left"), 10);
            } else {
              if (x < 0) {
                x = 0;
              } else if (x > 290) {
                // FIXME: it does not stop in the right place: where does the 100 come from?
                x = 290;
              }
              console.log(x + ',' + marginLeftStart + ',' + widthStart);
              $("iframe").css("margin-left", marginLeftStart - x);
              $("iframe").css("width", widthStart + x);
            }
          };
        },
        contentHeightFunctionFactory: function (targetContainer) {
          return function () {
            return 1200;
          }
        },
        contentWidthFunctionFactory: function (targetContainer) {
          return function () {
            return 800;
          }
        },
        isContainerScrolled: false
      });

    });
  </script>
</head>

<body>
  <!--
  <div class="widget-it" data-site="http://noraesae.github.io/perfect-scrollbar/" data-left-offset="10" data-top-offset="730" style="float: left; width: 610px; height: 405px"></div>
  <div class="widget-it" data-site="http://www.w3schools.com/html/html_css.asp" data-left-offset="150" data-top-offset="320" style="float: left; width: 605px; height: 405px"></div>
-->
  <div class="w3schools" style="position: absolute"></div>
  <!--
  <div id="margintop">0</div>
  <div id="decrease">decrease</div>
  <div id="increase">increase</div>

  <div id="description">
    <div>
      <p>The command takes options applicable</p>
      <p>The command takes options applicable</p>
      <p>The command takes options applicable</p>
      <p>The command takes options applicable</p>
      <p>The command takes options applicable</p>
      <p>The command takes options applicable</p>
      <p>The command takes options applicable</p>
      <p>The command takes options applicable</p>
      <p>The command takes options applicable</p>
      <p>The command takes options applicable</p>
    </div>
  </div>
-->

</body>

</html>